# 第一部分

### 入门资料（Introductory Material）

如果你让你的用户来说出他们最喜欢你产品中哪些特点，他们的清单里不太可能会以安全性和可靠性来开头。这两个特征通常都是隐藏在他们的期望里：如果这两点在你的产品中做到了，那么你的用户们通常是不会注意到他们的。

我们确信安全性和可靠性对于任何的组织来说，都是最重要的事情。最终（Ultimately），是没有人会愿意使用一个既不安全又不可靠的产品，因此这些方面将会提供与众不同的业务价值。

本书的第一部分着重介绍安全可靠系统的基础实践部分具有很大的交集，以及您可能在这两张之间需要做出的一些权衡。之后，我们将会为您的潜在对手提供高级指导：他们将如何行动，以及他们的行动将会如何影响到您系统的生命周期。

## 第一章

#### **安全和可靠性的交集**

> By Adam Stubblefield, Massimiliano Poletto, and Piotr Lewandowski with David Huska and Betsy Beyer
>
> 以上统统不认识，到时候查下

### 关于密码和电钻（On Passwords and Power Drills）

2012年的9月27日，Google宣布了一条公告，内部服务中发生了一系列的级联故障。最终，这些故障是由一把电钻恢复了。 

Google有一个内部密码管理器，这个管理器可以让员工们存储和分享来自不支持更好的身份验证机制的第三方服务的一些机密。其中有个机密就是用来连接Google旧金山办公区的大巴上访客WiFi的密码。

9月的那天，公司的运输团队发了一封邮件给员工们说，我们的这个WIFI密码已经换了。接下来就导致了剧增的流量远远超出了密码管理系统所能承受的，因为这个密码管理系统是多年以前开发给一小部分的系统管理员用的，所以根本无法承受。

这些负载导致了密码管理器的主副本节点无法响应，因此负载均衡就把流量分到了从副本节点上，很快从节点也同样挂了。在这时候，系统呼叫了值班工程师。这个工程师也没有处理这种情况的经验：这个密码管理器之前是以最好的支持来维护的，并且在过去的5年里，从来都没有发生过这种停止服务的情况。这个工程师尝试重启这个服务（:smile:果然走到哪里都是遇到问题先重启试试）。但是他不知道重启这服务需要一个硬件安全模块（hardware security module (HSM)）智能卡。

这些智能卡存储在全球不同谷歌办公室的多个保险箱中，但不在值班工程师所在的纽约。当服务重启失败，这个工程师摇人找到了一位澳大利亚的同事帮忙这个取出这个卡帮他重启这个服务。令人失望的是，这位澳大利亚的老铁也没能打开这个保险箱，因为这个组合密码保存在了现在已经挂了的密码管理器中。幸运的是，加州的另一位同事把这个现场保险箱的密码记住了，并拿到了这张卡智能卡。然而，当的工程师将卡插入读卡器后，服务仍然无法重新启动，出现了一个奇怪的错误：“密码无法加载任何保护此密钥的卡（The password could not load any of the cards protecting this key）。”

与此同时，澳大利亚同事决定采取暴力手段来解决这个安全问题，在任务中使用了一把电钻来打开保险箱。一个小时后，这个保险箱被打开了，但是这张新得到的也触发了上面同样的错误消息。

团队在又花了一个小时后才发现，事实上，读卡器的绿灯亮了，并不代表这张卡已经正确地插入。当工程师把卡翻过来再插进去，服务重启成功，故障也结束了。